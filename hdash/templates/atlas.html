<html>
<head>
  <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.3/build/pure-min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin-left: 20px;
    }
    .timestamp {
      padding-top:10px;
      padding-bottom:20px;
    }
    .validation_True {
      background-color: lightgreen !important;
    }
    .validation_False {
      background-color: pink !important;
    }
  </style>
</head>
<body>
  <h1>{{ project.atlas_id }}:  {{ project.name }}</h1>
  <div class="timestamp">Automatically generated:  {{ now }}</div>

  <h2>Metadata Files Detected:</h2>
  <table class="pure-table pure-table-horizontal">
    <thead>
        <tr>
            <th>Synapse ID</th>
            <th>Category</th>
            <th>Num Items</th>
        </tr>
    </thead>
    <tbody>
      {% for meta_file in project.meta_list %}
        <tr>
          <td><a href="https://www.synapse.org/#!Synapse:{{ meta_file.id }}/files/">{{ meta_file.id }}</a></td>
          <td>{{ meta_file.category }}</td>
          <td>{{ meta_file.num_items }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  <h2>Metadata Validation:</h2>  
  <table class="pure-table pure-table-horizontal">
    <thead>
        <tr>
            <th>Code</th>
            <th>Text</th>
            <th>Passed/Failed</th>
            <th>Notes</th>
        </tr>
    </thead>
    <tbody>
      {% for validation in project.validation_list %}
        {% set trClass = "validation_%s" % validation.validation_passed %}
        {% set passed = "Failed" %}
        {% if (validation.validation_passed) %}
          {% set passed = "Passed" %}
        {% endif %}
        <tr>
          <td>{{ validation.validation_code }}</td>
          <td>{{ validation.validation_text }}</td>
          <td class={{trClass}}>{{ passed }}</td>
          <td>
            {% for error in validation.error_list %}
              - {{ error }}<br/>
            {% endfor %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <br/>
  <br/>
  <br/>
</body>

</html>
